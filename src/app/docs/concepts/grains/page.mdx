# Grains & Pricing

Understanding Consonant's unified currency system.

## What are Grains?

**Grains** are Consonant's internal currency unit. They provide a consistent way to measure costs across different AI providers and models.

**1 million grains = $1.00 USD**

## Why Grains?

AI providers price tokens differently:
- OpenAI GPT-4: $0.03/1K input, $0.06/1K output
- Anthropic Claude: $0.015/1K input, $0.075/1K output
- Google Gemini: $0.00025/1K input, $0.0005/1K output

Converting to grains normalizes everything:

| Model | Input (grains/1K) | Output (grains/1K) |
|-------|------------------|-------------------|
| GPT-4 | 30,000 | 60,000 |
| Claude 3 Opus | 15,000 | 75,000 |
| Gemini Pro | 250 | 500 |

## Setting Customer Budgets

Assign grain budgets to customers:

```typescript
// Via API
await consonant.setCustomerBudget({
  customerId: 'customer_123',
  monthlyGrains: 50_000_000, // $50/month
})

// Or in the dashboard under Customers → Budget
```

## Pricing Conversion Examples

### Example 1: Conservative SaaS

You charge $50/month per user. You want each user to have a $10 AI budget.

```
Budget: 10,000,000 grains ($10)
```

If a user exceeds their budget, Consonant blocks further requests.

### Example 2: Usage-Based

You want to match customer revenue to their AI spend (1:1 margin).

```
Customer pays $100/month → 100,000,000 grain budget
```

## Monitoring Grain Usage

View real-time grain consumption in the dashboard:

- **Customer List**: Sort by grain balance, usage, or margin
- **Customer Detail**: See daily/weekly/monthly trends
- **Alerts**: Get notified when customers hit thresholds

## Automatic Top-ups

For usage-based models, configure automatic top-ups:

```typescript
await consonant.configureTopup({
  customerId: 'customer_123',
  topupGrains: 10_000_000, // Add 10M grains
  triggerThreshold: 1_000_000, // When balance drops below 1M
  maxMonthlyTopups: 10, // Safety limit
})
```
